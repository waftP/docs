---
title: "Payouts"
description: "End-to-end guide to sending payouts: auth, signing, request shape, callbacks, and reconciliation."
---

Use this guide to build a reliable payout flow with Waftpay. Payouts are asynchronous: you receive an acceptance response first, then a final outcome via webhook.

---

## Quick flow

Authenticate -> Sign -> Send payout -> Receive acceptance -> Receive webhook -> Reconcile (optional status check).

---

## Prerequisites

- Product-scoped Bearer token from [Authentication API](/api-reference/auth/auth-token).
- RSA 2048 key pair registered with Waftpay. See [Signature generation](/api-reference/signatures/signature-generate).
- Correct base URL for your environment. See [Environments](/environments).

---

## Endpoint

**POST** `/payments-api-service/v1/payouts`

**Required headers**

```http
Authorization: Bearer <access_token>
Content-Type: application/json
X-Custom-Signature: <base64-signature>
```

**Idempotency**: reuse the same `transaction.reference` for retries of the same logical payout.

---

## Request body (example)

```json
{
  "transaction": {
    "reference": "TXN213687756272200",
    "amount": 1000,
    "currency": "KES",
    "description": "Vendor payout",
    "timestamp": "2025-01-21T12:30:10Z"
  },
  "originator": {
    "msisdn": "254708374149",
    "channel": "USSD",
    "country": "KE",
    "name": "Payment",
    "purpose": "Transaction Payment"
  },
  "recipient": {
    "service_code": "MPESAB2C",
    "reference": "INVJMA02",
    "account": "254708374149"
  },
  "callback_url": "https://merchant.example.com/callbacks/payout",
  "meta": {
    "note": "This info is returned as part of the callback",
    "agent_id": "AGENT458"
  }
}
```

**Notes**

- `amount` is in major units (e.g., 1000 = 1000 KES).
- `timestamp` must be ISO 8601 UTC (ends with `Z`).
- `recipient.service_code` is assigned by Waftpay; confirm entitlement before go-live.

---

## Acceptance response (immediate)

```json
{
  "status": "200.100",
  "code": "ACCEPTED",
  "description": "Accepted for processing",
  "data": {
    "amount": 1000,
    "total_charges": 0,
    "total_amount": 1000,
    "transaction_reference": "TXN213687756272200",
    "payment_uuid": "8363546214883574601",
    "payment_reference": "1RJITP5HLL",
    "time_received": "2025-04-04T06:13:52.585619Z"
  }
}
```

---

## Webhook (final outcome)

We POST to your `callback_url` when the payout completes. See [Webhook payload](/pages/webhooks/payload).

---

## Status checks (optional)

If a webhook is delayed or missing, query status using [Check payout status](/api-reference/payouts/retrieve) or [Status checks](/pages/guides/status-checks).

---

## Common issues

- **Signature mismatch**: ensure the string-to-sign matches the payload exactly. See [Signature generation](/api-reference/signatures/signature-generate).
- **Wrong token**: use a payout-scoped Bearer token.
- **Duplicate references**: reuse `transaction.reference` only for safe retries.

---

## Related links

- [Initiate payout API](/api-reference/payouts/payouts-initiate)
- [Check payout status](/api-reference/payouts/retrieve)
- [Webhooks overview](/pages/webhooks/overview)
- [Errors](/errors)
