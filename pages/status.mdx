---
title: "API Status"
description: "Run a live health check against the Waftpay API."
---

import { useState } from "react";

function StatusCheck({ url }) {
const [state, setState] = useState("idle"); // idle | loading | up | down
const [latency, setLatency] = useState(null);
const [detail, setDetail] = useState("");

async function run() {
setState("loading");
setLatency(null);
setDetail("");
const start = performance.now();
try {
const res = await fetch(url, { method: "GET", cache: "no-store" });
const ms = Math.round(performance.now() - start);
setLatency(ms);
if (!res.ok) {
setState("down");
setDetail(`HTTP ${res.status}`);
return;
}
const data = await res.json().catch(() => ({}));
if (data?.status === "UP") {
setState("up");
setDetail(
Array.isArray(data?.groups) ? `groups: ${data.groups.join(", ")}` : ""
);
} else {
setState("down");
setDetail(typeof data?.status === "string" ? `status: ${data.status}` : "");
}
} catch (e) {
setState("down");
setDetail(String(e?.message || e));
}
}

return (
<div>
<button
onClick={run}
style={{
padding: "0.6rem 1rem",
borderRadius: "0.5rem",
border: "1px solid #e5e7eb",
fontWeight: 600,
cursor: "pointer"
}}
>
{state === "loading" ? "Checking…" : "Run status check"}
</button>

      <div style={{ marginTop: "1rem", fontSize: "0.95rem" }}>
        {state === "idle" && <span>Click the button to test the API.</span>}
        {state === "loading" && <span>⏳ Contacting health endpoint…</span>}
        {state === "up" && (
          <span>✅ <strong>Good</strong>{latency !== null ? ` • ${latency} ms` : ""}{detail ? ` • ${detail}` : ""}</span>
        )}
        {state === "down" && (
          <span>❌ <strong>Not available</strong>{detail ? ` • ${detail}` : ""}</span>
        )}
      </div>

      <details style={{ marginTop: "0.75rem" }}>
        <summary>Troubleshooting (CORS & networking)</summary>
        <ul>
          <li>If this page can’t reach the API from your browser, ensure the health endpoint allows cross-origin GETs (CORS): <code>Access-Control-Allow-Origin: *</code> (or your docs domain).</li>
          <li>Health URL: <code>{url}</code> (kept out of the UI except here for debugging).</li>
          <li>Firewall/VPN/proxy rules can also block the request from the docs domain.</li>
        </ul>
      </details>
    </div>
);
}

<StatusCheck url="https://payments-api.dev.pockets-pay.com/actuator/health" />